{"version":3,"file":"app.umd.js","sources":["../scripts/dom.js","../scripts/navigation.js","../scripts/app.js"],"sourcesContent":["\"use strict\";\nexport {DOM, Animate}\n\n/** Make DOM element*/\nclass DOM {\n  constructor (dom, tags){\n    this.$\n    if (typeof dom != 'string'){\n      this.$ = dom\n      return\n    }\n    this.$ = document.createElement(dom);\n    if (typeof tags == 'object') for (const tag in tags) {\n      if (tag in this.$)\n        this.$[tag] = tags[tag]\n      else\n        this.$.dataset[tag] = tags[tag]\n    }\n  }\n  /**\n   * Clone node\n   * @param {bool} deep - If true, then the node and its whole subtree,\n   * including text that may be in child Text nodes, is also copied.\n   */\n  cloneNode (deep){\n    let node = new DOM(this.$.cloneNode(deep))\n    return node\n  }\n  /**\n   * Set DOM innerText.\n   * @param {string} str - Text to apply.\n   */\n  set innerText(str){\n    this.$.innerText = str\n  }\n  /**\n   * Get DOM innerText.\n   */\n  get innerText(){\n    return this.$.innerText\n  }\n  /** Get DOM offset height */\n  get height (){\n    return this.$.offsetHeight\n  }\n  /** Get DOM offset width */\n  get width (){\n    return this.$.offsetWidth\n  }\n  /** Get DOM id */\n  get id (){\n    return this.$.id\n  }\n  /** Set DOM id */\n  set id (str){\n    this.$.id= str\n  }\n  /** Get DOM value */\n  get value (){\n    return this.$.value\n  }\n  /** Set DOM value */\n  set value (str){\n    this.$.value = str\n  }\n  /** Get DOM src */\n  get src (){\n    return this.$.src\n  }\n  /** Set DOM src */\n  set src (str){\n    this.$.src = str\n  }\n  /**\n   * Focus on DOM.\n   */\n  focus (){\n    this.$.focus()\n  }\n  /** Get DOM classList object. */\n  get classList(){\n    return this.$.classList\n  }\n  /** Get DOM style object. */\n  get style(){\n    return this.$.style\n  }\n  /**\n   * Append a ``onchange`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onchange (self, ev, args){\n    this.$.onchange = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n  return this\n  }\n  /**\n   * Append a ``onclick`` event.\n   * @param {function} ev - Function to be executed on click.\n   */\n  onclick (self, ev, args){\n    this.$.onclick = (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    }\n  return this\n  }\n  /**\n   * Append a ``mouseup`` and ``touchup`` event.\n   * @param {function} ev - Function to be executed on up.\n   */\n  onup (self, ev, args){\n    this.$.addEventListener('mouseup', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a ``mousedown`` and ``touchdown`` event.\n   * @param {function} ev - Function to be executed on down.\n   */\n  ondown (self, ev, args){\n    this.$.addEventListener('mousedown', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a ``mousemove`` and ``touchmove`` event.\n   * @param {function} ev - Function to be executed on move.\n   */\n  onmove (self, ev, args){\n    this.$.addEventListener('mousemove', (e) => {\n      if (typeof args == 'undefined')\n        ev.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        ev.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Append a event listener.\n   * @param {string} event - Event listener name.\n   * @param {function} fun - Function to be executed on move.\n   * @param {function} args - Arguments to be applied to the function.\n   */\n  onevent (event, self, fun, args){\n    this.$.addEventListener(event, (e) => {\n      if (typeof args == 'undefined')\n        fun.apply(self, [e])\n      else if (args.constructor == Array) {\n        args.push(e)\n        fun.apply(self, args)\n      }\n    })\n  return this\n  }\n  /**\n   * Appends others :js:func:`DOM`.\n   * @param {Object[]} DOMS - Array of :js:func:`DOM` or/and direct DOM Nodes.\n   */\n  append (DOMS){\n    if (DOMS.constructor != Array)\n      DOMS = [DOMS]\n\n    DOMS.forEach ((item) => {\n      if (/HTML(.*)Element/.test(item.constructor.name))\n        this.$.appendChild(item)\n      else if (typeof item == 'object' &&\n               /HTML(.*)Element/.test(item.$.constructor.name))\n        this.$.appendChild(item.$)\n    })\n\n    return this\n  }\n  /**\n   * Delete object.\n   */\n  delete (){\n    this.$.remove()\n    delete this\n  }\n  /**\n   * Remove childs from :js:func:`DOM` object.\n   */\n  removeChilds (){\n    let child = this.$.lastElementChild\n    while (child) {\n      this.$.removeChild(child)\n      child = this.$.lastElementChild\n    }\n    return this\n  }\n  /**\n   * Get DOM Node element.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Optional parent DOM.\n   */\n  static get (a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'undefined') ? document.querySelector (a) : b.querySelector(a)\n  }\n  /**\n   * Get all DOM Node elements.\n   * @param {string} a - Target object query selector.\n   * @param {Object} b - Parent DOM.\n   */\n  static getAll(a, b){\n    b = b instanceof DOM ? b.$ : b\n    return (typeof b == 'object') ? b.querySelectorAll(a) : get(b).querySelectorAll(a)\n  }\n  /**\n   * Include or remove a class to a DOM.\n   * @param {Object} b - Target DOM.\n   * @param {string} _class - Optional class, defaults to `on`.\n   */\n  static switchState (b, _class){\n    b = b instanceof DOM ? b.$ : b\n    let cn = _class != undefined ? _class : `on`\n    if (b.classList.contains(cn))\n      b.classList.remove(cn)\n    else\n      b.classList.add(cn)\n  }\n  /**\n  * Generate a unique identifier.\n  */\n  static UID (){\n    return (+new Date).toString(36) + Math.random().toString(36).substr(2)\n  }\n  /**\n   * Prototype a DOM composed by details, sumamary and a h2 title with optional\n   * onclick event.\n   * @param {Object} str - id, title and onclick function of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.title - Title of the DOM element.\n   * @param {Object} str.onclick - Onclick function of the DOM element.\n   */\n  static prototypeDetails (str){\n    let summary = new DOM('summary', {innerText:str.innerText})\n    let details = new DOM('details', {id:str.id, name:str.id})\n      .append(summary)\n\n    if (str.onevent != undefined) {\n      str.onevent.forEach(event => {\n        event.args.push(details.$)\n        summary.onevent(\n          event.event,\n          event.self,\n          event.fun,\n          event.args\n        )\n      })\n    }\n    return details\n  }\n  /**\n   * Prototype a DOM composed by input(file type) and label.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   */\n  static prototypeInputFile (str){\n    return new DOM('label', {\n      htmlFor:`${str.id}_input`,\n      id:str.id,\n      className:str.className,\n      innerText:str.innerText\n      }).append(\n        new DOM('input', {id:`${str.id}_input`, type:'file'})\n      )\n  }\n  /**\n   * Prototype a DOM composed by input(checkbox) and label styled as as switch.\n   * @param {Object} str - id, className and innerText of the DOM element.\n   * @param {string} str.id - Id of the DOM element.\n   * @param {string} str.className - ClassName of the DOM element.\n   * @param {string} str.innerText - Inner text of the DOM element.\n   * @returns Array with input and container.\n   */\n  static prototypeCheckSwitch (str){\n    let input = new DOM('input', {\n      id:str.id,\n      name:str.id,\n      className:'checkswitch',\n      type:'checkbox',\n      value:false\n    })\n\n    let container = new DOM('div', {className:str.className})\n      .append([\n        new DOM('div')\n          .append([\n            new DOM('label', {\n                className:'checkswitch',\n                htmlFor:str.id,\n                innerText:str.innerText\n              }).append([\n                input,\n                new DOM('span')\n              ])\n          ])\n      ])\n\n    return [input, container]\n  }\n  /**\n   * Prototype a DOM that allows data to be downloded on its creation.\n   * @param {string} filename - name of the file.\n   * @param {string} file - file content.\n   */\n  static prototypeDownload (filename, file){\n    let data,\n        reg = /.*\\.(py|xml|csv|json|svg|png)$/\n    if (!reg.test(filename))\n      return\n\n    let format = filename.match(reg)[1]\n    filename = filename\n      .replaceAll('/','-')\n      .replaceAll(' ','_')\n      .toLowerCase()\n\n    switch (format) {\n      case 'xml':\n        data = \"data:x-application/xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'py':\n        data = \"data:text/python;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'json':\n        data = \"data:text/json;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'csv':\n        data = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'svg':\n        data = \"data:image/svg+xml;charset=utf-8,\" + encodeURIComponent(file);\n        break\n      case 'png':\n        data = file; // Expect already in blob\n        break\n    }\n    let element = document.createElement('a')\n    element.setAttribute('href', data)\n    element.setAttribute('download', filename)\n    element.style.display = 'none'\n\n    document.body.appendChild(element)\n    element.click ()\n    document.body.removeChild(element)\n  }\n  /**\n   * Set a option of a select list by its innerText.\n   * @param {Object} dom - Node of the select list.\n   * @param {string} value - Inner text of the target option.\n   */\n  static setSelected (dom, value){\n    for (var i = 0; i < dom.$.options.length; i++){\n      if (dom.$.options[i].text == value){\n        dom.$.options[i].selected = true\n        return\n      }\n    }\n  }\n  /**\n   * Updates parameter of children of a DOM.\n   * Lazy because doesn't care is successful or not.\n   * Useful for generic lists, like in searches.\n   * @param {Object} dom - Container of the list.\n   * @param {string} uid - Item to search for.\n   * @param {Object} props - Properties to update, where the key is also the DOM id.\n   * @param {string} param - Parameter to update.\n   */\n  static lazyUpdate (dom, uid, props, param){\n    param = param == undefined ? 'innerText' : param\n    let element = DOM.get(`[data-uid='${uid}']`, dom)\n    for (const key in props){\n      DOM.get(`#${key}`, element)[param] = props[key]\n    }\n  }\n}\n","\"use strict\";\n\nimport {DOM} from './dom.js'\nimport {Toolbox} from './toolbox.js'\n\n/* Handle navigation, theming, search, shortcuts */\nclass Navigation {\n  constructor () {\n    this.portrait = false\n    this.offline = 'file:' == window.location.protocol\n    this.currentTheme = localStorage.getItem('theme')\n    this.contentRoot = this.getContentRoot()\n    this.globalRoot = this.getGlobalRoot()\n\n    let metaRepo = document.querySelector('meta[name=\"repo\"]')\n    this.repo = metaRepo ? metaRepo.content.split('/') : ['']\n\n    let $ = this.$ = {}\n    $.body = new DOM(DOM.get('body'))\n\n    if (this.currentTheme === null)\n      this.currentTheme = this.getOSTheme()\n    $.body.classList.add('js-on')\n    if (this.currentTheme !== this.getOSTheme())\n      $.body.classList.add(this.currentTheme)\n\n\t  $.searchButton = new DOM('button', {\n      id:'search',\n      className:'icon',\n      title:'Search (/)'\n    }).onclick(this, () => {\n      DOM.switchState($.searchArea)\n      DOM.switchState($.searchAreaBg)\n      $.searchInput.focus()\n      $.searchInput.$.select()\n    })\n\t  $.changeTheme = new DOM('button', {\n      className: this.currentTheme === 'dark' ? 'icon on' : 'icon',\n      id:'theme',\n      title:'Switch theme'\n    }).onclick(this, () => {\n      $.body.classList.remove(this.currentTheme)\n      this.currentTheme = this.currentTheme === 'dark' ? 'light' : 'dark'\n      if (this.getOSTheme() == this.currentTheme)\n        localStorage.removeItem('theme')\n      else {\n        localStorage.setItem('theme', this.currentTheme)\n        $.body.classList.add(this.currentTheme)\n      }\n    })\n\n    $.searchAreaBg = new DOM('div', {\n      className:'search-area-bg'\n    }).onclick(this, () => {\n      DOM.switchState($.searchArea)\n      DOM.switchState($.searchAreaBg)\n    })\n    $.searchArea = new DOM(DOM.get('.search-area'))\n    $.searchForm = new DOM(DOM.get('form', $.searchArea))\n    $.searchInput = new DOM(DOM.get('input', $.searchForm))\n    $.searchForm.$['action'] = DOM.get('link[rel=\"search\"]').href\n    $.body.append([$.searchAreaBg])\n\n    $.rightHeader = new DOM(DOM.get('header #right span.reverse')).append([$.changeTheme, $.searchButton])\n\n    $.relatedNext = DOM.get('.related .next')\n    $.relatedPrev = DOM.get('.related .prev')\n  }\n  /* Update GUI based on resize event */\n  handleResize () {\n    this.portrait = window.innerHeight > window.innerWidth ? true : false\n  }\n  /*\n   * Get relative path to the root\n   * Dual fallback to support multiple Sphinx versions.\n   */\n  getContentRoot () {\n    let content_root\n    let dom = new DOM(DOM.get('script#documentation_options'))\n    if (dom.$ !== null)\n      content_root = dom.$.dataset['url_root'];\n    if (content_root == undefined)\n      content_root = DOM.get('html').dataset['content_root']\n    if (content_root == undefined) {\n      dom =  new DOM(DOM.get('.repotoc-tree .current'))\n      if (dom.$ !== null)\n        content_root = dom.$.getAttribute('href').replace('index.html', '')\n    }\n    if (content_root == undefined) {\n      console.warn(\"Failed to get content root.\")\n      content_root = ''\n    }\n    return content_root\n  }\n  /*\n   * Get relative path to the global root\n   */\n  getGlobalRoot () {\n    return document.querySelector('meta[name=\"global_root\"]').content\n  }\n  /* Search shortcut */\n  search (e) {\n    if (e.key === '/' && !this.$.searchArea.classList.contains('on')) {\n      DOM.switchState(this.$.searchArea)\n      DOM.switchState(this.$.searchAreaBg)\n      this.$.searchInput.focus()\n      this.$.searchInput.$.select()\n    } else if (e.code === 'Escape') {\n      if (this.$.searchArea.classList.contains('on')) {\n        DOM.switchState(this.$.searchArea)\n        DOM.switchState(this.$.searchAreaBg)\n      }\n    }\n  }\n  /* Related shortcut */\n  related (e) {\n    if (!e.altKey || !e.shiftKey)\n      return\n\n    /* Try to anchor to same section */\n    let anchor = (e.ctrlKey && location.href.split('#').length > 1) ?\n                 `#${location.href.split('#')[1]}` : \"\"\n\n    if (e.code == 'ArrowLeft' && this.$.relatedPrev)\n      location.href = this.$.relatedPrev.href + anchor\n    else if (e.code == 'ArrowRight' && this.$.relatedNext)\n      location.href = this.$.relatedNext.href + anchor\n  }\n\n  keyUp (e) {\n    switch (e.key) {\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        this.related(e)\n        break\n      case '/':\n        this.search(e)\n    }\n\n    if (e.code === 'Escape')\n      this.search(e)\n  }\n  /**\n   * Init navigation.\n   */\n  init () {\n    onresize = () => {this.handleResize()}\n    document.addEventListener('keyup', (e) => {this.keyUp(e)}, false);\n    this.dynamic()\n  }\n  /**\n   * Updates elements in a reactive manner,\n   * fetching from the main doctools/metadata.js,\n   * that contain the most up-to-date metadata\n   */\n  dynamic () {\n    if (this.offline) {\n      console.log(\"navigation: dynamic features are not available in offline mode\")\n      return\n    }\n\n    /* Get dynamic elements */\n    let $ = this.$\n    $.repotocTreeOverlay = new DOM(DOM.get('.repotoc-tree.overlay root'))\n    $.repotocTreeSidebar = new DOM(DOM.get('.sphinxsidebar .repotoc-tree root'))\n    $.banner = new DOM(DOM.get('.banner'))\n\n    let resolveJSON = (j) => {\n        if ('repotoc' in j)\n          this.dynamicRepoToc(j['repotoc'])\n        if ('banner' in j)\n          this.dynamicBanner(j['banner'])\n    }\n\n    /* Fetch metadata */\n    let json = localStorage.getItem('metadata')\n    if (json !== null)\n      json = JSON.parse(json)\n\n    let unix_day = new Date(0)\n    unix_day.setHours(24)\n    if (json === null || json['timestamp'] + unix_day < Date.now()) {\n      let metadata = `${this.globalRoot}doctools/metadata.json`\n\n      fetch(metadata, {\n        method: 'Get',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then((response) => {\n        if (response.ok !== true) {\n          return\n        }\n\n        return response.json()\n      }).then((obj) => {\n        if (!obj)\n          return\n\n        resolveJSON(obj)\n        obj['timestamp'] = Date.now()\n        localStorage.setItem('metadata', JSON.stringify(obj))\n      }).catch((e) => {\n        return\n      })\n    } else {\n      resolveJSON(json)\n    }\n  }\n\n  dynamicRepoToc (obj) {\n    let $ = this.$\n\n    let home = \"index.html\"\n    let linksOverlay = [],\n        linksSidebar = []\n    for (const [key, value] of Object.entries(obj)) {\n      if (!('name' in value))\n        continue\n\n      let base = key == this.repo[0] ?\n                 this.contentRoot :\n                 `${this.globalRoot}${key}/`\n      if ('topic' in value) {\n        for (const [key_, value_] of Object.entries(value['topic'])) {\n          if (typeof(value_) !== \"string\")\n            continue\n\n          let a = new DOM('a', {\n            'href': `${base}${key_}/${home}`,\n            'className': this.repo.join('/') === `${key}/${key_}` ? 'current' : ''\n          })\n          a.innerText = value_\n\n          linksSidebar.push(a)\n        }\n      } else {\n        linksSidebar.push(new DOM('a', {\n          'href': `${base}${home}`,\n          'className': this.repo[0] === key ? 'current' : '',\n          'innerText': value['name']\n        }))\n      }\n    }\n\n    linksSidebar.forEach((elem) => {\n      linksOverlay.push(elem.cloneNode(true))\n    })\n\n    if ($.repotocTreeOverlay.$)\n      $.repotocTreeOverlay.removeChilds(),\n      $.repotocTreeOverlay.append(linksOverlay)\n    if ($.repotocTreeSidebar.$)\n      $.repotocTreeSidebar.removeChilds(),\n      $.repotocTreeSidebar.append(linksSidebar)\n  }\n\n  dynamicBanner (obj) {\n    let $ = this.$\n\n    if ('msg' in obj)\n      $.banner.append(new DOM('span', {\n        'innerText': obj['msg']\n      }))\n\n    if ('a_href' in obj && 'a_text' in obj)\n      $.banner.append(new DOM('a', {\n        'href': obj['a_href'],\n        'innerText': obj['a_text'],\n        'target': '_blank'\n      }))\n  }\n  /**\n   * Set items state.\n   * @param state - True for open, false for closed.\n   */\n  setState (items, state) {\n    items.forEach((elem) => {\n      if (state) {\n        elem.classList.add('on')\n      } else {\n        elem.classList.remove('on')\n      }\n    })\n  }\n  /**\n   * Get OS Theme\n   */\n  getOSTheme () {\n    return window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? 'dark' : 'light'\n  }\n}\n\nexport let navigation = new Navigation()\n","import '../style/bundle.scss'\nimport { navigation } from './navigation.js'\n\nexport default function App (){\n  window.app = {}\n\n  app.navigation = navigation\n\n  app.navigation.init()\n}\n\nApp()\n"],"names":["DOM","constructor","dom","tags","this","$","document","createElement","tag","dataset","cloneNode","deep","innerText","str","height","offsetHeight","width","offsetWidth","id","value","src","focus","classList","style","onchange","self","ev","args","e","apply","Array","push","onclick","onup","addEventListener","ondown","onmove","onevent","event","fun","append","DOMS","forEach","item","test","name","appendChild","remove","removeChilds","child","lastElementChild","removeChild","get","a","b","querySelector","getAll","querySelectorAll","switchState","_class","cn","undefined","contains","add","UID","Date","toString","Math","random","substr","prototypeDetails","summary","details","prototypeInputFile","htmlFor","className","type","prototypeCheckSwitch","input","prototypeDownload","filename","file","data","reg","format","match","replaceAll","toLowerCase","encodeURIComponent","element","setAttribute","display","body","click","setSelected","i","options","length","text","selected","lazyUpdate","uid","props","param","key","navigation","portrait","offline","window","location","protocol","currentTheme","localStorage","getItem","contentRoot","getContentRoot","globalRoot","getGlobalRoot","metaRepo","repo","content","split","getOSTheme","searchButton","title","searchArea","searchAreaBg","searchInput","select","changeTheme","removeItem","setItem","searchForm","href","rightHeader","relatedNext","relatedPrev","handleResize","innerHeight","innerWidth","content_root","getAttribute","replace","console","warn","search","code","related","altKey","shiftKey","anchor","ctrlKey","keyUp","init","onresize","dynamic","log","repotocTreeOverlay","repotocTreeSidebar","banner","resolveJSON","j","dynamicRepoToc","dynamicBanner","json","JSON","parse","unix_day","setHours","now","metadata","fetch","method","headers","then","response","ok","obj","stringify","catch","home","linksOverlay","linksSidebar","Object","entries","base","key_","value_","join","elem","target","setState","items","state","matchMedia","matches","App","app"],"mappings":"oOAIA,MAAMA,EACJ,WAAAC,CAAaC,EAAKC,GAEhB,GADAC,KAAKC,EACa,iBAAPH,GAKX,GADAE,KAAKC,EAAIC,SAASC,cAAcL,GACb,iBAARC,EAAkB,IAAK,MAAMK,KAAOL,EACzCK,KAAOJ,KAAKC,EACdD,KAAKC,EAAEG,GAAOL,EAAKK,GAEnBJ,KAAKC,EAAEI,QAAQD,GAAOL,EAAKK,QAR7BJ,KAAKC,EAAIH,CAUZ,CAMD,SAAAQ,CAAWC,GAET,OADW,IAAIX,EAAII,KAAKC,EAAEK,UAAUC,GAErC,CAKD,aAAIC,CAAUC,GACZT,KAAKC,EAAEO,UAAYC,CACpB,CAID,aAAID,GACF,OAAOR,KAAKC,EAAEO,SACf,CAED,UAAIE,GACF,OAAOV,KAAKC,EAAEU,YACf,CAED,SAAIC,GACF,OAAOZ,KAAKC,EAAEY,WACf,CAED,MAAIC,GACF,OAAOd,KAAKC,EAAEa,EACf,CAED,MAAIA,CAAIL,GACNT,KAAKC,EAAEa,GAAIL,CACZ,CAED,SAAIM,GACF,OAAOf,KAAKC,EAAEc,KACf,CAED,SAAIA,CAAON,GACTT,KAAKC,EAAEc,MAAQN,CAChB,CAED,OAAIO,GACF,OAAOhB,KAAKC,EAAEe,GACf,CAED,OAAIA,CAAKP,GACPT,KAAKC,EAAEe,IAAMP,CACd,CAID,KAAAQ,GACEjB,KAAKC,EAAEgB,OACR,CAED,aAAIC,GACF,OAAOlB,KAAKC,EAAEiB,SACf,CAED,SAAIC,GACF,OAAOnB,KAAKC,EAAEkB,KACf,CAKD,QAAAC,CAAUC,EAAMC,EAAIC,GASpB,OAREvB,KAAKC,EAAEmB,SAAYI,SACE,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,GAChB,EAEEvB,IACN,CAKD,OAAA4B,CAASP,EAAMC,EAAIC,GASnB,OAREvB,KAAKC,EAAE2B,QAAWJ,SACG,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,GAChB,EAEEvB,IACN,CAKD,IAAA6B,CAAMR,EAAMC,EAAIC,GAShB,OAREvB,KAAKC,EAAE6B,iBAAiB,WAAYN,SACf,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,GAChB,IAEEvB,IACN,CAKD,MAAA+B,CAAQV,EAAMC,EAAIC,GASlB,OAREvB,KAAKC,EAAE6B,iBAAiB,aAAcN,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,GAChB,IAEEvB,IACN,CAKD,MAAAgC,CAAQX,EAAMC,EAAIC,GASlB,OAREvB,KAAKC,EAAE6B,iBAAiB,aAAcN,SACjB,IAARD,EACTD,EAAGG,MAAMJ,EAAM,CAACG,IACTD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVF,EAAGG,MAAMJ,EAAME,GAChB,IAEEvB,IACN,CAOD,OAAAiC,CAASC,EAAOb,EAAMc,EAAKZ,GAS3B,OAREvB,KAAKC,EAAE6B,iBAAiBI,GAAQV,SACX,IAARD,EACTY,EAAIV,MAAMJ,EAAM,CAACG,IACVD,EAAK1B,aAAe6B,QAC3BH,EAAKI,KAAKH,GACVW,EAAIV,MAAMJ,EAAME,GACjB,IAEEvB,IACN,CAKD,MAAAoC,CAAQC,GAYN,OAXIA,EAAKxC,aAAe6B,QACtBW,EAAO,CAACA,IAEVA,EAAKC,SAAUC,IACT,kBAAkBC,KAAKD,EAAK1C,YAAY4C,MAC1CzC,KAAKC,EAAEyC,YAAYH,GACG,iBAARA,GACP,kBAAkBC,KAAKD,EAAKtC,EAAEJ,YAAY4C,OACjDzC,KAAKC,EAAEyC,YAAYH,EAAKtC,EAAE,IAGvBD,IACR,CAID,SACEA,KAAKC,EAAE0C,QAER,CAID,YAAAC,GACE,IAAIC,EAAQ7C,KAAKC,EAAE6C,iBACnB,KAAOD,GACL7C,KAAKC,EAAE8C,YAAYF,GACnBA,EAAQ7C,KAAKC,EAAE6C,iBAEjB,OAAO9C,IACR,CAMD,UAAOgD,CAAKC,EAAGC,GAEb,YAAoB,KADpBA,EAAIA,aAAatD,EAAMsD,EAAEjD,EAAIiD,GACMhD,SAASiD,cAAeF,GAAKC,EAAEC,cAAcF,EACjF,CAMD,aAAOG,CAAOH,EAAGC,GAEf,MAAoB,iBADpBA,EAAIA,aAAatD,EAAMsD,EAAEjD,EAAIiD,GACGA,EAAEG,iBAAiBJ,GAAKD,IAAIE,GAAGG,iBAAiBJ,EACjF,CAMD,kBAAOK,CAAaJ,EAAGK,GAErB,IAAIC,EAAeC,MAAVF,EAAsBA,EAAS,MADxCL,EAAIA,aAAatD,EAAMsD,EAAEjD,EAAIiD,GAEvBhC,UAAUwC,SAASF,GACvBN,EAAEhC,UAAUyB,OAAOa,GAEnBN,EAAEhC,UAAUyC,IAAIH,EACnB,CAID,UAAOI,GACL,QAAS,IAAIC,MAAMC,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,OAAO,EACrE,CASD,uBAAOC,CAAkBzD,GACvB,IAAI0D,EAAU,IAAIvE,EAAI,UAAW,CAACY,UAAUC,EAAID,YAC5C4D,EAAU,IAAIxE,EAAI,UAAW,CAACkB,GAAGL,EAAIK,GAAI2B,KAAKhC,EAAIK,KACnDsB,OAAO+B,GAaV,OAXmBV,MAAfhD,EAAIwB,SACNxB,EAAIwB,QAAQK,SAAQJ,IAClBA,EAAMX,KAAKI,KAAKyC,EAAQnE,GACxBkE,EAAQlC,QACNC,EAAMA,MACNA,EAAMb,KACNa,EAAMC,IACND,EAAMX,KACP,IAGE6C,CACR,CAQD,yBAAOC,CAAoB5D,GACzB,OAAO,IAAIb,EAAI,QAAS,CACtB0E,QAAQ,GAAG7D,EAAIK,WACfA,GAAGL,EAAIK,GACPyD,UAAU9D,EAAI8D,UACd/D,UAAUC,EAAID,YACX4B,OACD,IAAIxC,EAAI,QAAS,CAACkB,GAAG,GAAGL,EAAIK,WAAY0D,KAAK,SAElD,CASD,2BAAOC,CAAsBhE,GAC3B,IAAIiE,EAAQ,IAAI9E,EAAI,QAAS,CAC3BkB,GAAGL,EAAIK,GACP2B,KAAKhC,EAAIK,GACTyD,UAAU,cACVC,KAAK,WACLzD,OAAM,IAkBR,MAAO,CAAC2D,EAfQ,IAAI9E,EAAI,MAAO,CAAC2E,UAAU9D,EAAI8D,YAC3CnC,OAAO,CACN,IAAIxC,EAAI,OACLwC,OAAO,CACN,IAAIxC,EAAI,QAAS,CACb2E,UAAU,cACVD,QAAQ7D,EAAIK,GACZN,UAAUC,EAAID,YACb4B,OAAO,CACRsC,EACA,IAAI9E,EAAI,cAMrB,CAMD,wBAAO+E,CAAmBC,EAAUC,GAClC,IAAIC,EACAC,EAAM,iCACV,IAAKA,EAAIvC,KAAKoC,GACZ,OAEF,IAAII,EAASJ,EAASK,MAAMF,GAAK,GAMjC,OALAH,EAAWA,EACRM,WAAW,IAAI,KACfA,WAAW,IAAI,KACfC,cAEKH,GACN,IAAK,MACHF,EAAO,wCAA0CM,mBAAmBP,GACpE,MACF,IAAK,KACHC,EAAO,kCAAoCM,mBAAmBP,GAC9D,MACF,IAAK,OACHC,EAAO,gCAAkCM,mBAAmBP,GAC5D,MACF,IAAK,MACHC,EAAO,+BAAiCM,mBAAmBP,GAC3D,MACF,IAAK,MACHC,EAAO,oCAAsCM,mBAAmBP,GAChE,MACF,IAAK,MACHC,EAAOD,EAGX,IAAIQ,EAAUnF,SAASC,cAAc,KACrCkF,EAAQC,aAAa,OAAQR,GAC7BO,EAAQC,aAAa,WAAYV,GACjCS,EAAQlE,MAAMoE,QAAU,OAExBrF,SAASsF,KAAK9C,YAAY2C,GAC1BA,EAAQI,QACRvF,SAASsF,KAAKzC,YAAYsC,EAC3B,CAMD,kBAAOK,CAAa5F,EAAKiB,GACvB,IAAK,IAAI4E,EAAI,EAAGA,EAAI7F,EAAIG,EAAE2F,QAAQC,OAAQF,IACxC,GAAI7F,EAAIG,EAAE2F,QAAQD,GAAGG,MAAQ/E,EAE3B,YADAjB,EAAIG,EAAE2F,QAAQD,GAAGI,UAAW,EAIjC,CAUD,iBAAOC,CAAYlG,EAAKmG,EAAKC,EAAOC,GAClCA,EAAiB1C,MAAT0C,EAAqB,YAAcA,EAC3C,IAAId,EAAUzF,EAAIoD,IAAI,cAAciD,MAASnG,GAC7C,IAAK,MAAMsG,KAAOF,EAChBtG,EAAIoD,IAAI,IAAIoD,IAAOf,GAASc,GAASD,EAAME,EAE9C,EC9GI,IAAIC,EAAa,IA/RxB,MACE,WAAAxG,GACEG,KAAKsG,UAAW,EAChBtG,KAAKuG,QAAU,SAAWC,OAAOC,SAASC,SAC1C1G,KAAK2G,aAAeC,aAAaC,QAAQ,SACzC7G,KAAK8G,YAAc9G,KAAK+G,iBACxB/G,KAAKgH,WAAahH,KAAKiH,gBAEvB,IAAIC,EAAWhH,SAASiD,cAAc,qBACtCnD,KAAKmH,KAAOD,EAAWA,EAASE,QAAQC,MAAM,KAAO,CAAC,IAEtD,IAAIpH,EAAID,KAAKC,EAAI,CAAE,EACnBA,EAAEuF,KAAO,IAAI5F,EAAIA,EAAIoD,IAAI,SAEC,OAAtBhD,KAAK2G,eACP3G,KAAK2G,aAAe3G,KAAKsH,cAC3BrH,EAAEuF,KAAKtE,UAAUyC,IAAI,SACjB3D,KAAK2G,eAAiB3G,KAAKsH,cAC7BrH,EAAEuF,KAAKtE,UAAUyC,IAAI3D,KAAK2G,cAE7B1G,EAAEsH,aAAe,IAAI3H,EAAI,SAAU,CAChCkB,GAAG,SACHyD,UAAU,OACViD,MAAM,eACL5F,QAAQ5B,MAAM,KACfJ,EAAI0D,YAAYrD,EAAEwH,YAClB7H,EAAI0D,YAAYrD,EAAEyH,cAClBzH,EAAE0H,YAAY1G,QACdhB,EAAE0H,YAAY1H,EAAE2H,QAAQ,IAE3B3H,EAAE4H,YAAc,IAAIjI,EAAI,SAAU,CAC/B2E,UAAiC,SAAtBvE,KAAK2G,aAA0B,UAAY,OACtD7F,GAAG,QACH0G,MAAM,iBACL5F,QAAQ5B,MAAM,KACfC,EAAEuF,KAAKtE,UAAUyB,OAAO3C,KAAK2G,cAC7B3G,KAAK2G,aAAqC,SAAtB3G,KAAK2G,aAA0B,QAAU,OACzD3G,KAAKsH,cAAgBtH,KAAK2G,aAC5BC,aAAakB,WAAW,UAExBlB,aAAamB,QAAQ,QAAS/H,KAAK2G,cACnC1G,EAAEuF,KAAKtE,UAAUyC,IAAI3D,KAAK2G,cAC3B,IAGH1G,EAAEyH,aAAe,IAAI9H,EAAI,MAAO,CAC9B2E,UAAU,mBACT3C,QAAQ5B,MAAM,KACfJ,EAAI0D,YAAYrD,EAAEwH,YAClB7H,EAAI0D,YAAYrD,EAAEyH,aAAa,IAEjCzH,EAAEwH,WAAa,IAAI7H,EAAIA,EAAIoD,IAAI,iBAC/B/C,EAAE+H,WAAa,IAAIpI,EAAIA,EAAIoD,IAAI,OAAQ/C,EAAEwH,aACzCxH,EAAE0H,YAAc,IAAI/H,EAAIA,EAAIoD,IAAI,QAAS/C,EAAE+H,aAC3C/H,EAAE+H,WAAW/H,EAAU,OAAIL,EAAIoD,IAAI,sBAAsBiF,KACzDhI,EAAEuF,KAAKpD,OAAO,CAACnC,EAAEyH,eAEjBzH,EAAEiI,YAAc,IAAItI,EAAIA,EAAIoD,IAAI,+BAA+BZ,OAAO,CAACnC,EAAE4H,YAAa5H,EAAEsH,eAExFtH,EAAEkI,YAAcvI,EAAIoD,IAAI,kBACxB/C,EAAEmI,YAAcxI,EAAIoD,IAAI,iBACzB,CAED,YAAAqF,GACErI,KAAKsG,SAAWE,OAAO8B,YAAc9B,OAAO+B,UAC7C,CAKD,cAAAxB,GACE,IAAIyB,EACA1I,EAAM,IAAIF,EAAIA,EAAIoD,IAAI,iCAc1B,OAbc,OAAVlD,EAAIG,IACNuI,EAAe1I,EAAIG,EAAEI,QAAkB,UACrBoD,MAAhB+E,IACFA,EAAe5I,EAAIoD,IAAI,QAAQ3C,QAAsB,cACnCoD,MAAhB+E,IACF1I,EAAO,IAAIF,EAAIA,EAAIoD,IAAI,2BACT,OAAVlD,EAAIG,IACNuI,EAAe1I,EAAIG,EAAEwI,aAAa,QAAQC,QAAQ,aAAc,MAEhDjF,MAAhB+E,IACFG,QAAQC,KAAK,+BACbJ,EAAe,IAEVA,CACR,CAID,aAAAvB,GACE,OAAO/G,SAASiD,cAAc,4BAA4BiE,OAC3D,CAED,MAAAyB,CAAQrH,GACQ,MAAVA,EAAE4E,KAAgBpG,KAAKC,EAAEwH,WAAWvG,UAAUwC,SAAS,MAKrC,WAAXlC,EAAEsH,MACP9I,KAAKC,EAAEwH,WAAWvG,UAAUwC,SAAS,QACvC9D,EAAI0D,YAAYtD,KAAKC,EAAEwH,YACvB7H,EAAI0D,YAAYtD,KAAKC,EAAEyH,gBAPzB9H,EAAI0D,YAAYtD,KAAKC,EAAEwH,YACvB7H,EAAI0D,YAAYtD,KAAKC,EAAEyH,cACvB1H,KAAKC,EAAE0H,YAAY1G,QACnBjB,KAAKC,EAAE0H,YAAY1H,EAAE2H,SAOxB,CAED,OAAAmB,CAASvH,GACP,IAAKA,EAAEwH,SAAWxH,EAAEyH,SAClB,OAGF,IAAIC,EAAU1H,EAAE2H,SAAW1C,SAASwB,KAAKZ,MAAM,KAAKxB,OAAS,EAChD,IAAIY,SAASwB,KAAKZ,MAAM,KAAK,KAAO,GAEnC,aAAV7F,EAAEsH,MAAuB9I,KAAKC,EAAEmI,YAClC3B,SAASwB,KAAOjI,KAAKC,EAAEmI,YAAYH,KAAOiB,EACzB,cAAV1H,EAAEsH,MAAwB9I,KAAKC,EAAEkI,cACxC1B,SAASwB,KAAOjI,KAAKC,EAAEkI,YAAYF,KAAOiB,EAC7C,CAED,KAAAE,CAAO5H,GACL,OAAQA,EAAE4E,KACR,IAAK,YACL,IAAK,aACHpG,KAAK+I,QAAQvH,GACb,MACF,IAAK,IACHxB,KAAK6I,OAAOrH,GAGD,WAAXA,EAAEsH,MACJ9I,KAAK6I,OAAOrH,EACf,CAID,IAAA6H,GACEC,SAAW,KAAOtJ,KAAKqI,gBACvBnI,SAAS4B,iBAAiB,SAAUN,IAAOxB,KAAKoJ,MAAM5H,EAAC,IAAI,GAC3DxB,KAAKuJ,SACN,CAMD,OAAAA,GACE,GAAIvJ,KAAKuG,QAEP,YADAoC,QAAQa,IAAI,kEAKd,IAAIvJ,EAAID,KAAKC,EACbA,EAAEwJ,mBAAqB,IAAI7J,EAAIA,EAAIoD,IAAI,+BACvC/C,EAAEyJ,mBAAqB,IAAI9J,EAAIA,EAAIoD,IAAI,sCACvC/C,EAAE0J,OAAS,IAAI/J,EAAIA,EAAIoD,IAAI,YAE3B,IAAI4G,EAAeC,IACX,YAAaA,GACf7J,KAAK8J,eAAeD,EAAW,SAC7B,WAAYA,GACd7J,KAAK+J,cAAcF,EAAU,OAAE,EAIjCG,EAAOpD,aAAaC,QAAQ,YACnB,OAATmD,IACFA,EAAOC,KAAKC,MAAMF,IAEpB,IAAIG,EAAW,IAAItG,KAAK,GAExB,GADAsG,EAASC,SAAS,IACL,OAATJ,GAAiBA,EAAgB,UAAIG,EAAWtG,KAAKwG,MAAO,CAC9D,IAAIC,EAAW,GAAGtK,KAAKgH,mCAEvBuD,MAAMD,EAAU,CACdE,OAAQ,MACRC,QAAS,CACP,eAAgB,sBAEjBC,MAAMC,IACP,IAAoB,IAAhBA,EAASC,GAIb,OAAOD,EAASX,MAAM,IACrBU,MAAMG,IACFA,IAGLjB,EAAYiB,GACZA,EAAe,UAAIhH,KAAKwG,MACxBzD,aAAamB,QAAQ,WAAYkC,KAAKa,UAAUD,IAAK,IACpDE,OAAOvJ,IACR,GAER,MACMoI,EAAYI,EAEf,CAED,cAAAF,CAAgBe,GACd,IAAI5K,EAAID,KAAKC,EAET+K,EAAO,aACPC,EAAe,GACfC,EAAe,GACnB,IAAK,MAAO9E,EAAKrF,KAAUoK,OAAOC,QAAQP,GAAM,CAC9C,KAAM,SAAU9J,GACd,SAEF,IAAIsK,EAAOjF,GAAOpG,KAAKmH,KAAK,GACjBnH,KAAK8G,YACL,GAAG9G,KAAKgH,aAAaZ,KAChC,GAAI,UAAWrF,EACb,IAAK,MAAOuK,EAAMC,KAAWJ,OAAOC,QAAQrK,EAAa,OAAI,CAC3D,GAAuB,iBAAnB,EACF,SAEF,IAAIkC,EAAI,IAAIrD,EAAI,IAAK,CACnBqI,KAAQ,GAAGoD,IAAOC,KAAQN,IAC1BzG,UAAavE,KAAKmH,KAAKqE,KAAK,OAAS,GAAGpF,KAAOkF,IAAS,UAAY,KAEtErI,EAAEzC,UAAY+K,EAEdL,EAAavJ,KAAKsB,EACnB,MAEDiI,EAAavJ,KAAK,IAAI/B,EAAI,IAAK,CAC7BqI,KAAQ,GAAGoD,IAAOL,IAClBzG,UAAavE,KAAKmH,KAAK,KAAOf,EAAM,UAAY,GAChD5F,UAAaO,EAAY,OAG9B,CAEDmK,EAAa5I,SAASmJ,IACpBR,EAAatJ,KAAK8J,EAAKnL,WAAU,GAAM,IAGrCL,EAAEwJ,mBAAmBxJ,IACvBA,EAAEwJ,mBAAmB7G,eACrB3C,EAAEwJ,mBAAmBrH,OAAO6I,IAC1BhL,EAAEyJ,mBAAmBzJ,IACvBA,EAAEyJ,mBAAmB9G,eACrB3C,EAAEyJ,mBAAmBtH,OAAO8I,GAC/B,CAED,aAAAnB,CAAec,GACb,IAAI5K,EAAID,KAAKC,EAET,QAAS4K,GACX5K,EAAE0J,OAAOvH,OAAO,IAAIxC,EAAI,OAAQ,CAC9BY,UAAaqK,EAAS,OAGtB,WAAYA,GAAO,WAAYA,GACjC5K,EAAE0J,OAAOvH,OAAO,IAAIxC,EAAI,IAAK,CAC3BqI,KAAQ4C,EAAY,OACpBrK,UAAaqK,EAAY,OACzBa,OAAU,WAEf,CAKD,QAAAC,CAAUC,EAAOC,GACfD,EAAMtJ,SAASmJ,IACTI,EACFJ,EAAKvK,UAAUyC,IAAI,MAEnB8H,EAAKvK,UAAUyB,OAAO,KACvB,GAEJ,CAID,UAAA2E,GACE,OAAOd,OAAOsF,WAAW,gCAAgCC,QAAU,OAAS,OAC7E,GC/RY,SAASC,IACtBxF,OAAOyF,IAAM,CAAE,EAEfA,IAAI5F,WAAaA,EAEjB4F,IAAI5F,WAAWgD,MACjB,QAEA2C"}